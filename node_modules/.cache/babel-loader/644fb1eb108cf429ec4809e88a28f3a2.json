{"ast":null,"code":"// prune extraneous packages\nconst Arborist = require('@npmcli/arborist');\n\nconst reifyFinish = require('./utils/reify-finish.js');\n\nconst BaseCommand = require('./base-command.js');\n\nclass Prune extends BaseCommand {\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get description() {\n    return 'Remove extraneous packages';\n  }\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n\n\n  static get name() {\n    return 'prune';\n  }\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n\n\n  static get params() {\n    return ['production'];\n  }\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n\n\n  static get usage() {\n    return ['[[<@scope>/]<pkg>...]'];\n  }\n\n  exec(args, cb) {\n    this.prune().then(() => cb()).catch(cb);\n  }\n\n  async prune() {\n    const where = this.npm.prefix;\n    const opts = { ...this.npm.flatOptions,\n      path: where,\n      log: this.npm.log\n    };\n    const arb = new Arborist(opts);\n    await arb.prune(opts);\n    await reifyFinish(this.npm, arb);\n  }\n\n}\n\nmodule.exports = Prune;","map":{"version":3,"sources":["/Users/kaelen/nsc-mds/node_modules/npm/lib/prune.js"],"names":["Arborist","require","reifyFinish","BaseCommand","Prune","description","name","params","usage","exec","args","cb","prune","then","catch","where","npm","prefix","opts","flatOptions","path","log","arb","module","exports"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,kBAAD,CAAxB;;AACA,MAAMC,WAAW,GAAGD,OAAO,CAAC,yBAAD,CAA3B;;AAEA,MAAME,WAAW,GAAGF,OAAO,CAAC,mBAAD,CAA3B;;AACA,MAAMG,KAAN,SAAoBD,WAApB,CAAgC;AAC9B;AACsB,aAAXE,WAAW,GAAI;AACxB,WAAO,4BAAP;AACD;AAED;;;AACe,aAAJC,IAAI,GAAI;AACjB,WAAO,OAAP;AACD;AAED;;;AACiB,aAANC,MAAM,GAAI;AACnB,WAAO,CAAC,YAAD,CAAP;AACD;AAED;;;AACgB,aAALC,KAAK,GAAI;AAClB,WAAO,CAAC,uBAAD,CAAP;AACD;;AAEDC,EAAAA,IAAI,CAAEC,IAAF,EAAQC,EAAR,EAAY;AACd,SAAKC,KAAL,GAAaC,IAAb,CAAkB,MAAMF,EAAE,EAA1B,EAA8BG,KAA9B,CAAoCH,EAApC;AACD;;AAEU,QAALC,KAAK,GAAI;AACb,UAAMG,KAAK,GAAG,KAAKC,GAAL,CAASC,MAAvB;AACA,UAAMC,IAAI,GAAG,EACX,GAAG,KAAKF,GAAL,CAASG,WADD;AAEXC,MAAAA,IAAI,EAAEL,KAFK;AAGXM,MAAAA,GAAG,EAAE,KAAKL,GAAL,CAASK;AAHH,KAAb;AAKA,UAAMC,GAAG,GAAG,IAAItB,QAAJ,CAAakB,IAAb,CAAZ;AACA,UAAMI,GAAG,CAACV,KAAJ,CAAUM,IAAV,CAAN;AACA,UAAMhB,WAAW,CAAC,KAAKc,GAAN,EAAWM,GAAX,CAAjB;AACD;;AAnC6B;;AAqChCC,MAAM,CAACC,OAAP,GAAiBpB,KAAjB","sourcesContent":["// prune extraneous packages\nconst Arborist = require('@npmcli/arborist')\nconst reifyFinish = require('./utils/reify-finish.js')\n\nconst BaseCommand = require('./base-command.js')\nclass Prune extends BaseCommand {\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get description () {\n    return 'Remove extraneous packages'\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get name () {\n    return 'prune'\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get params () {\n    return ['production']\n  }\n\n  /* istanbul ignore next - see test/lib/load-all-commands.js */\n  static get usage () {\n    return ['[[<@scope>/]<pkg>...]']\n  }\n\n  exec (args, cb) {\n    this.prune().then(() => cb()).catch(cb)\n  }\n\n  async prune () {\n    const where = this.npm.prefix\n    const opts = {\n      ...this.npm.flatOptions,\n      path: where,\n      log: this.npm.log,\n    }\n    const arb = new Arborist(opts)\n    await arb.prune(opts)\n    await reifyFinish(this.npm, arb)\n  }\n}\nmodule.exports = Prune\n"]},"metadata":{},"sourceType":"script"}